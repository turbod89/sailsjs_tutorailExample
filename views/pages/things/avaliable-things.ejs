<div id="avaliable-things" v-cloak>
  <div class = "container-fluid">
    
    <div class="row" style="margin-bottom: 16px;">
      <div class="col-12 text-center">
        <h1>Things</h1>
        <p>View available things to borrow, or upload your own things.</p>
        <button class="btn btn-outline-info" @click="clickUploadThing()">Upload a Thing</button>
      </div>
    </div>

  
    <div class = "row">
      <div
        class = "col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3"
        v-for="thing in things"
        style="margin-bottom: 16px;"
      >
        <div
          class="card"
        >
          <img class="card-img-top" :src="thing.imageSrc" :alt="thing.label">
          <div class="card-body">
            <h5 class="card-title">{{ thing.label }}</h5>
            
            <p
              v-if="thing.owner.id !== me.id"
              class="card-text"
            >{{ thing.owner.fullName }}</p>
            <p v-if="thing.owner.id === me.id" class="card-text">
              Mine
              <a v-if="thing.owner.id === me.id" href="#" @click="clickDeleteThing(thing.id)" class="card-link">
                Delete
              </a>
            </p>
          </div>
        </div>
  
      </div>
    </div>

  </div>

  <% /* Confirm Delete Thing Modal */%>

  <modal v-if="confirmDeleteThingModalOpen" v-cloak @close="closeDeleteThingModal()" key="deleteThing">

    <div class="modal-header">
      <h5 class="modal-title">Are you sure?</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>You are about to delete item "{{ thingDeleteThingModal.label }}". Are you sure?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-primary" data-dismiss="modal">No, I'm not sure</button>
      <button type="button" class="btn btn-danger" @click="clickConfirmDeleteThingModal()">Delete</button>
    </div>
    
  </modal>


  <% /* Upload Thing Modal */%>
  
  <modal v-if="uploadThingModalOpen" v-cloak @close="closeUploadThingModal()" key="uploadThing">
    <div class="modal-header">
      <h5 class="modal-title">Upload a new thing</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <ajax-form
      action="uploadThing"
      :syncing.sync="syncing"
      :cloud-error.sync="cloudError"
      :handle-parsing="handleParseUploadThingForm"
      @submitted="submittedUploadThingForm"

    >
      <div class="modal-body">
        <div class = "row">
          <div class ="col-12">
            <div class="form-group">
              <label for="inputImage">Add a photo:</label>
              <input
                type="file"
                name="photo"
                :disabled="syncing"
                class="form-control-file file-input"
                @change="changeFileInput($event.target)"
                id="inputImage"
              >
            </div>
          </div>
        </div>
        <div class = "row">
          <div class = "col-12">
            <img
              v-if="uploadThingImagePreview"
              :src="uploadThingImagePreview"
              class="rounded"
              style='max-width: 100%; padding: 1em;'
            />
          </div>
          <p><strong>Tip:</strong> Make sure the item is front and center in the photo, so people know exactly what you are offering to share.</p>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <label for="uploadThingLabel">Little description of the thing.</label>
              <input
                type="text"
                class="form-control"
                id="uploadThingLabel"
                name="label"
                :value.sync="uploadFormData.label"
                aria-describedby="labelHelp"
                placeholder="Red Mountain bike"
                @change="changeUploadThingLabel($event.target)"
              >
              <small id="labelHelp" class="form-text text-muted"></small>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-info" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Share item</button>
      </div>
    </ajax-form>

  </modal>


</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
